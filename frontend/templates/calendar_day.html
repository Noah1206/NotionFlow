<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ formatted_date }} - {{ calendar.name }} - NotionFlow</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='images/favicon.svg') }}">
    <link rel="icon" type="image/svg+xml" sizes="16x16" href="{{ url_for('static', filename='images/favicon-16x16.svg') }}">
    <link rel="icon" type="image/svg+xml" sizes="32x32" href="{{ url_for('static', filename='images/favicon-32x32.svg') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='images/apple-touch-icon.svg') }}">
    <link rel="icon" type="image/svg+xml" sizes="192x192" href="{{ url_for('static', filename='images/icon-192x192.svg') }}">
    <link rel="icon" type="image/svg+xml" sizes="512x512" href="{{ url_for('static', filename='images/icon-512x512.svg') }}">
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <meta name="theme-color" content="#3B82F6">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/variables.css') }}?v={{ range(100000, 999999) | random }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/calendar-day.css') }}?v={{ range(100000, 999999) | random }}">
    
    <!-- Core notification system -->
    <script src="{{ url_for('static', filename='js/notification-utils.js') }}?v={{ range(100000, 999999) | random }}"></script>
</head>

<body class="calendar-day-page">

<div class="calendar-day-workspace" data-calendar-id="{{ calendar.id }}" data-selected-date="{{ selected_date }}">
    
    <!-- Top Navigation Bar -->
    <div class="calendar-topbar">
        <div class="topbar-left">
            <button class="btn-back" onclick="window.location.href='/dashboard/calendar/{{ calendar.id }}'">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <div class="calendar-header-info">
                <div class="calendar-icon-small" style="background: {{ calendar.color or '#3B82F6' }}"></div>
                <div class="header-text">
                    <h1 class="calendar-name">{{ calendar.name }}</h1>
                    <div class="date-info">
                        <span class="formatted-date">{{ formatted_date }}</span>
                        <span class="weekday">{{ weekday }}</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="topbar-right">
            <button class="btn-add-event" onclick="openEventModal()">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <line x1="12" y1="5" x2="12" y2="19"/>
                    <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
                새 이벤트
            </button>
            
            <button class="btn-today" onclick="goToToday()">오늘</button>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="calendar-day-content">
        <!-- Top Summary Section -->
        <div class="top-summary-section">
            <!-- Quick Notes Widget - Excel Style -->
            <div class="quick-notes-widget excel-widget">
                <div class="widget-header compact">
                    <div class="widget-icon">📝</div>
                    <h3>Quick Notes</h3>
                    <div class="widget-controls">
                        <button class="control-btn add-note" onclick="addNoteItem()" title="노트 추가">+</button>
                        <button class="control-btn clear-notes" onclick="clearAllNotes()" title="모두 지우기">✕</button>
                    </div>
                </div>
                <div class="excel-table notes-table">
                    <div class="table-header">
                        <div class="header-cell priority-column">우선순위</div>
                        <div class="header-cell note-column">메모</div>
                        <div class="header-cell action-column">작업</div>
                    </div>
                    <div class="table-body notes-table-body" id="notes-table-body">
                        <div class="table-row note-row" data-note-id="1">
                            <div class="cell priority-cell">
                                <select class="priority-select">
                                    <option value="high" selected>🔥 높음</option>
                                    <option value="medium">📋 보통</option>
                                    <option value="low">📝 낮음</option>
                                </select>
                            </div>
                            <div class="cell note-cell">
                                <input type="text" class="note-input" value="🎯 Render 배포 환경 최적화 완료" placeholder="새 메모 입력...">
                            </div>
                            <div class="cell action-cell">
                                <button class="action-btn delete-note" onclick="deleteNote(1)" title="삭제">🗑</button>
                            </div>
                        </div>
                        <div class="table-row note-row" data-note-id="2">
                            <div class="cell priority-cell">
                                <select class="priority-select">
                                    <option value="high">🔥 높음</option>
                                    <option value="medium" selected>📋 보통</option>
                                    <option value="low">📝 낮음</option>
                                </select>
                            </div>
                            <div class="cell note-cell">
                                <input type="text" class="note-input" value="📱 모바일 반응형 테스트 진행 중" placeholder="새 메모 입력...">
                            </div>
                            <div class="cell action-cell">
                                <button class="action-btn delete-note" onclick="deleteNote(2)" title="삭제">🗑</button>
                            </div>
                        </div>
                        <div class="table-row note-row" data-note-id="3">
                            <div class="cell priority-cell">
                                <select class="priority-select">
                                    <option value="high">🔥 높음</option>
                                    <option value="medium">📋 보통</option>
                                    <option value="low" selected>📝 낮음</option>
                                </select>
                            </div>
                            <div class="cell note-cell">
                                <input type="text" class="note-input" value="📊 성능 모니터링 대시보드 구축 예정" placeholder="새 메모 입력...">
                            </div>
                            <div class="cell action-cell">
                                <button class="action-btn delete-note" onclick="deleteNote(3)" title="삭제">🗑</button>
                            </div>
                        </div>
                    </div>
                    <div class="empty-state notes-empty" id="notes-empty" style="display: none;">
                        <div class="empty-icon">📝</div>
                        <div class="empty-message">오늘의 주요 메모를 추가해보세요</div>
                        <button class="btn-add-first" onclick="addNoteItem()">첫 메모 추가</button>
                    </div>
                </div>
            </div>
            
            <!-- Today's Progress Widget - Excel Style -->
            <div class="today-stats-widget excel-widget">
                <div class="widget-header compact">
                    <div class="widget-icon">📊</div>
                    <h3>Today's Progress</h3>
                    <div class="widget-controls">
                        <button class="control-btn add-progress" onclick="addProgressItem()" title="지표 추가">+</button>
                        <button class="control-btn refresh-progress" onclick="refreshProgress()" title="새로고침">⟳</button>
                    </div>
                </div>
                <div class="excel-table progress-table">
                    <div class="table-header">
                        <div class="header-cell metric-column">지표</div>
                        <div class="header-cell value-column">진행률</div>
                        <div class="header-cell action-column">작업</div>
                    </div>
                    <div class="table-body progress-table-body" id="progress-table-body">
                        <div class="table-row progress-row" data-progress-id="1">
                            <div class="cell metric-cell">
                                <input type="text" class="metric-input" value="완료된 루틴" placeholder="지표명 입력...">
                            </div>
                            <div class="cell value-cell">
                                <div class="progress-input-group">
                                    <input type="number" class="progress-current" value="8" min="0" max="99">
                                    <span class="progress-separator">/</span>
                                    <input type="number" class="progress-total" value="15" min="1" max="99">
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 53%"></div>
                                </div>
                            </div>
                            <div class="cell action-cell">
                                <button class="action-btn delete-progress" onclick="deleteProgress(1)" title="삭제">🗑</button>
                            </div>
                        </div>
                        <div class="table-row progress-row" data-progress-id="2">
                            <div class="cell metric-cell">
                                <input type="text" class="metric-input" value="완료된 작업" placeholder="지표명 입력...">
                            </div>
                            <div class="cell value-cell">
                                <div class="progress-input-group">
                                    <input type="number" class="progress-current" value="2" min="0" max="99">
                                    <span class="progress-separator">/</span>
                                    <input type="number" class="progress-total" value="10" min="1" max="99">
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 20%"></div>
                                </div>
                            </div>
                            <div class="cell action-cell">
                                <button class="action-btn delete-progress" onclick="deleteProgress(2)" title="삭제">🗑</button>
                            </div>
                        </div>
                        <div class="table-row progress-row" data-progress-id="3">
                            <div class="cell metric-cell">
                                <input type="text" class="metric-input" value="이벤트 참석" placeholder="지표명 입력...">
                            </div>
                            <div class="cell value-cell">
                                <div class="progress-input-group">
                                    <input type="number" class="progress-current" value="1" min="0" max="99">
                                    <span class="progress-separator">/</span>
                                    <input type="number" class="progress-total" value="3" min="1" max="99">
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 33%"></div>
                                </div>
                            </div>
                            <div class="cell action-cell">
                                <button class="action-btn delete-progress" onclick="deleteProgress(3)" title="삭제">🗑</button>
                            </div>
                        </div>
                    </div>
                    <div class="empty-state progress-empty" id="progress-empty" style="display: none;">
                        <div class="empty-icon">📊</div>
                        <div class="empty-message">오늘의 진행률을 추가해보세요</div>
                        <button class="btn-add-first" onclick="addProgressItem()">첫 지표 추가</button>
                    </div>
                </div>
            </div>
            
            <!-- Time Overview Widget - Excel Style -->
            <div class="time-overview-widget excel-widget">
                <div class="widget-header compact">
                    <div class="widget-icon">⏰</div>
                    <h3>Time Overview</h3>
                    <div class="widget-controls">
                        <button class="control-btn add-time" onclick="addTimeItem()" title="시간 추가">+</button>
                        <button class="control-btn sync-time" onclick="syncCurrentTime()" title="현재 시간">⟳</button>
                    </div>
                </div>
                <div class="excel-table time-table">
                    <div class="table-header">
                        <div class="header-cell label-column">구분</div>
                        <div class="header-cell time-column">시간/내용</div>
                        <div class="header-cell action-column">작업</div>
                    </div>
                    <div class="table-body time-table-body" id="time-table-body">
                        <div class="table-row time-row current-time-row" data-time-id="1">
                            <div class="cell label-cell">
                                <select class="time-type-select">
                                    <option value="current" selected>⏰ 현재 시간</option>
                                    <option value="next">📅 다음 일정</option>
                                    <option value="deadline">⏳ 마감 시간</option>
                                    <option value="reminder">🔔 알림</option>
                                </select>
                            </div>
                            <div class="cell time-content-cell">
                                <span class="time-display-live" id="current-time-display">14:30</span>
                            </div>
                            <div class="cell action-cell">
                                <button class="action-btn delete-time" onclick="deleteTime(1)" title="삭제">🗑</button>
                            </div>
                        </div>
                        <div class="table-row time-row" data-time-id="2">
                            <div class="cell label-cell">
                                <select class="time-type-select">
                                    <option value="current">⏰ 현재 시간</option>
                                    <option value="next" selected>📅 다음 일정</option>
                                    <option value="deadline">⏳ 마감 시간</option>
                                    <option value="reminder">🔔 알림</option>
                                </select>
                            </div>
                            <div class="cell time-content-cell">
                                <input type="text" class="time-content-input" value="15:30 - 1:1 코치 세션" placeholder="시간과 내용 입력...">
                            </div>
                            <div class="cell action-cell">
                                <button class="action-btn delete-time" onclick="deleteTime(2)" title="삭제">🗑</button>
                            </div>
                        </div>
                        <div class="table-row time-row" data-time-id="3">
                            <div class="cell label-cell">
                                <select class="time-type-select">
                                    <option value="current">⏰ 현재 시간</option>
                                    <option value="next">📅 다음 일정</option>
                                    <option value="deadline" selected>⏳ 마감 시간</option>
                                    <option value="reminder">🔔 알림</option>
                                </select>
                            </div>
                            <div class="cell time-content-cell">
                                <input type="text" class="time-content-input" value="18:00 - 코드 리뷰 완료" placeholder="시간과 내용 입력...">
                            </div>
                            <div class="cell action-cell">
                                <button class="action-btn delete-time" onclick="deleteTime(3)" title="삭제">🗑</button>
                            </div>
                        </div>
                    </div>
                    <div class="empty-state time-empty" id="time-empty" style="display: none;">
                        <div class="empty-icon">⏰</div>
                        <div class="empty-message">시간 정보를 추가해보세요</div>
                        <button class="btn-add-first" onclick="addTimeItem()">첫 시간 추가</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Content Grid Container -->
        <div class="main-content-grid">
            <!-- Daily Routine Section - Excel Style Enhanced -->
            <div class="daily-routine-section excel-widget">
            <div class="widget-header">
                <div class="widget-icon">🔄</div>
                <h3>Daily Routine</h3>
                <div class="widget-controls">
                    <button class="control-btn add-routine" onclick="addRoutineItem()" title="루틴 추가">+</button>
                    <button class="control-btn clear-routine" onclick="clearAllRoutines()" title="모두 지우기">✕</button>
                    <button class="control-btn sort-routine" onclick="sortRoutinesByTime()" title="시간순 정렬">↕</button>
                </div>
            </div>
            
            <!-- Excel-style grid table -->
            <div class="excel-table routine-table">
                <div class="table-header">
                    <div class="header-cell time-column">시간</div>
                    <div class="header-cell activity-column">활동</div>
                    <div class="header-cell status-column">완료</div>
                    <div class="header-cell action-column">작업</div>
                </div>
                <div class="table-body routine-table-body" id="routine-table-body">
                    <div class="table-row routine-row" draggable="true" data-routine-id="1">
                        <div class="cell time-cell">
                            <input type="time" class="time-input" value="06:00">
                        </div>
                        <div class="cell activity-cell">
                            <input type="text" class="activity-title-input" value="Morning Meditation" placeholder="활동명...">
                            <input type="text" class="activity-desc-input" value="10분 명상으로 마음 정리" placeholder="상세 설명...">
                        </div>
                        <div class="cell status-cell">
                            <input type="checkbox" class="routine-checkbox">
                        </div>
                        <div class="cell action-cell">
                            <button class="action-btn delete-routine" onclick="deleteRoutine(1)" title="삭제">🗑</button>
                        </div>
                    </div>
                    <div class="table-row routine-row" draggable="true" data-routine-id="2">
                        <div class="cell time-cell">
                            <input type="time" class="time-input" value="06:30">
                        </div>
                        <div class="cell activity-cell">
                            <input type="text" class="activity-title-input" value="Stretching & Water" placeholder="활동명...">
                            <input type="text" class="activity-desc-input" value="전신 스트레칭 + 물 500ml" placeholder="상세 설명...">
                        </div>
                        <div class="cell status-cell">
                            <input type="checkbox" class="routine-checkbox">
                        </div>
                        <div class="cell action-cell">
                            <button class="action-btn delete-routine" onclick="deleteRoutine(2)" title="삭제">🗑</button>
                        </div>
                    </div>
                    <div class="table-row routine-row" draggable="true" data-routine-id="3">
                        <div class="cell time-cell">
                            <input type="time" class="time-input" value="07:00">
                        </div>
                        <div class="cell activity-cell">
                            <input type="text" class="activity-title-input" value="Morning Workout" placeholder="활동명...">
                            <input type="text" class="activity-desc-input" value="홈트레이닝 45분 (근력/유산소)" placeholder="상세 설명...">
                        </div>
                        <div class="cell status-cell">
                            <input type="checkbox" class="routine-checkbox">
                        </div>
                        <div class="cell action-cell">
                            <button class="action-btn delete-routine" onclick="deleteRoutine(3)" title="삭제">🗑</button>
                        </div>
                    </div>
                    <div class="table-row routine-row" draggable="true" data-routine-id="4">
                        <div class="cell time-cell">
                            <input type="time" class="time-input" value="08:00">
                        </div>
                        <div class="cell activity-cell">
                            <input type="text" class="activity-title-input" value="Healthy Breakfast" placeholder="활동명...">
                            <input type="text" class="activity-desc-input" value="단백질 + 탄수화물 균형잡힌 아침식사" placeholder="상세 설명...">
                        </div>
                        <div class="cell status-cell">
                            <input type="checkbox" class="routine-checkbox">
                        </div>
                        <div class="cell action-cell">
                            <button class="action-btn delete-routine" onclick="deleteRoutine(4)" title="삭제">🗑</button>
                        </div>
                    </div>
                    <div class="table-row routine-row" draggable="true" data-routine-id="5">
                        <div class="cell time-cell">
                            <input type="time" class="time-input" value="09:00">
                        </div>
                        <div class="cell activity-cell">
                            <input type="text" class="activity-title-input" value="Deep Work Session #1" placeholder="활동명...">
                            <input type="text" class="activity-desc-input" value="가장 중요한 업무 2시간 집중" placeholder="상세 설명...">
                        </div>
                        <div class="cell status-cell">
                            <input type="checkbox" class="routine-checkbox">
                        </div>
                        <div class="cell action-cell">
                            <button class="action-btn delete-routine" onclick="deleteRoutine(5)" title="삭제">🗑</button>
                        </div>
                    </div>
                </div>
                <div class="empty-state routine-empty" id="routine-empty" style="display: none;">
                    <div class="empty-icon">🔄</div>
                    <div class="empty-message">일일 루틴을 추가하여 하루를 체계적으로 관리해보세요</div>
                    <button class="btn-add-first" onclick="addRoutineItem()">첫 루틴 추가</button>
                </div>
            </div>
        </div>

        <!-- Events Section -->
        <div class="events-section excel-widget">
            <div class="widget-header">
                <div class="widget-icon">📅</div>
                <h3>Events</h3>
                <button class="add-btn" onclick="openEventModal()" title="이벤트 추가">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <line x1="12" y1="5" x2="12" y2="19"/>
                        <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                </button>
            </div>
            
            <div class="events-content" id="day-events">
                <!-- Events table with sample data -->
                <div class="excel-table events-table">
                    <div class="table-header">
                        <div class="header-cell time-column">시간</div>
                        <div class="header-cell event-column">제목</div>
                        <div class="header-cell tag-column">태그</div>
                    </div>
                    <div class="table-body" id="events-table-body">
                        <div class="table-row event-row">
                            <div class="cell time-cell">10:00</div>
                            <div class="cell event-cell">
                                <div class="event-title">🏢 스프린트 계획 미팅</div>
                                <div class="event-description">다음 주 개발 일정 논의 및 우선순위 설정</div>
                            </div>
                            <div class="cell tag-cell">
                                <span class="event-tag work">업무</span>
                            </div>
                        </div>
                        <div class="table-row event-row">
                            <div class="cell time-cell">15:30</div>
                            <div class="cell event-cell">
                                <div class="event-title">☕ 1:1 코치 세션</div>
                                <div class="event-description">개발 커리어 성장 상담 및 피드백</div>
                            </div>
                            <div class="cell tag-cell">
                                <span class="event-tag personal">개인</span>
                            </div>
                        </div>
                        <div class="table-row event-row">
                            <div class="cell time-cell">18:00</div>
                            <div class="cell event-cell">
                                <div class="event-title">🎓 온라인 세미나</div>
                                <div class="event-description">"React 18의 새로운 기능과 성능 최적화"</div>
                            </div>
                            <div class="cell tag-cell">
                                <span class="event-tag learning">학습</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Add event button -->
                <div class="add-event-section">
                    <button class="btn-primary" onclick="openEventModal()">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <line x1="12" y1="5" x2="12" y2="19"/>
                            <line x1="5" y1="12" x2="19" y2="12"/>
                        </svg>
                        새 이벤트 추가
                    </button>
                </div>
            </div>
        </div>

        <!-- Tasks Section -->
        <div class="tasks-section excel-widget">
            <div class="widget-header">
                <div class="widget-icon">✅</div>
                <h3>Tasks</h3>
                <button class="add-btn" onclick="addTaskItem()" title="할 일 추가">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <line x1="12" y1="5" x2="12" y2="19"/>
                        <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                </button>
            </div>
            
            <div class="excel-table tasks-table">
                <div class="table-header">
                    <div class="header-cell status-column">완료</div>
                    <div class="header-cell task-column">작업</div>
                    <div class="header-cell priority-column">우선순위</div>
                </div>
                <div class="table-body">
                    <div class="table-row task-row" draggable="true">
                        <div class="cell status-cell">
                            <input type="checkbox" class="task-checkbox">
                        </div>
                        <div class="cell task-cell">
                            <div class="task-title">🚀 Render 배포 최적화</div>
                            <div class="task-description">환경변수 설정 + 빌드 스크립트 점검</div>
                        </div>
                        <div class="cell priority-cell">
                            <span class="priority-chip high">중요</span>
                        </div>
                    </div>
                    <div class="table-row task-row" draggable="true">
                        <div class="cell status-cell">
                            <input type="checkbox" class="task-checkbox">
                        </div>
                        <div class="cell task-cell">
                            <div class="task-title">📊 대시보드 성능 모니터링</div>
                            <div class="task-description">로딩 속도 개선 + 메모리 사용량 최적화</div>
                        </div>
                        <div class="cell priority-cell">
                            <span class="priority-chip high">중요</span>
                        </div>
                    </div>
                    <div class="table-row task-row" draggable="true">
                        <div class="cell status-cell">
                            <input type="checkbox" class="task-checkbox">
                        </div>
                        <div class="cell task-cell">
                            <div class="task-title">💡 사용자 피드백 분석</div>
                            <div class="task-description">UI/UX 개선점 찾기 + 우선순위 정리</div>
                        </div>
                        <div class="cell priority-cell">
                            <span class="priority-chip medium">보통</span>
                        </div>
                    </div>
                    <div class="table-row task-row" draggable="true">
                        <div class="cell status-cell">
                            <input type="checkbox" class="task-checkbox">
                        </div>
                        <div class="cell task-cell">
                            <div class="task-title">🔐 보안 업데이트</div>
                            <div class="task-description">라이브러리 의존성 점검 + 취약점 패치</div>
                        </div>
                        <div class="cell priority-cell">
                            <span class="priority-chip high">중요</span>
                        </div>
                    </div>
                    <div class="table-row task-row" draggable="true">
                        <div class="cell status-cell">
                            <input type="checkbox" class="task-checkbox">
                        </div>
                        <div class="cell task-cell">
                            <div class="task-title">📱 모바일 반응형 테스트</div>
                            <div class="task-description">iPhone/Android 다양한 해상도 검증</div>
                        </div>
                        <div class="cell priority-cell">
                            <span class="priority-chip medium">보통</span>
                        </div>
                    </div>
                    <div class="table-row task-row" draggable="true">
                        <div class="cell status-cell">
                            <input type="checkbox" class="task-checkbox">
                        </div>
                        <div class="cell task-cell">
                            <div class="task-title">🎨 디자인 시스템 정리</div>
                            <div class="task-description">컴포넌트 라이브러리 + 스타일 가이드 작성</div>
                        </div>
                        <div class="cell priority-cell">
                            <span class="priority-chip low">낮음</span>
                        </div>
                    </div>
                    <div class="table-row task-row" draggable="true">
                        <div class="cell status-cell">
                            <input type="checkbox" class="task-checkbox">
                        </div>
                        <div class="cell task-cell">
                            <div class="task-title">🐛 버그 리포트 처리</div>
                            <div class="task-description">GitHub Issues #12, #15, #18 해결</div>
                        </div>
                        <div class="cell priority-cell">
                            <span class="priority-chip medium">보통</span>
                        </div>
                    </div>
                    <div class="table-row task-row" draggable="true">
                        <div class="cell status-cell">
                            <input type="checkbox" class="task-checkbox">
                        </div>
                        <div class="cell task-cell">
                            <div class="task-title">📚 기술 문서 업데이트</div>
                            <div class="task-description">API 문서 + 사용자 가이드 최신화</div>
                        </div>
                        <div class="cell priority-cell">
                            <span class="priority-chip low">낮음</span>
                        </div>
                    </div>
                    <div class="table-row task-row completed" draggable="true">
                        <div class="cell status-cell">
                            <input type="checkbox" class="task-checkbox" checked>
                        </div>
                        <div class="cell task-cell">
                            <div class="task-title">✨ 캘린더 UI 개선</div>
                            <div class="task-description">Excel 스타일 + 인라인 편집 기능 완성</div>
                        </div>
                        <div class="cell priority-cell">
                            <span class="priority-chip high">중요</span>
                        </div>
                    </div>
                    <div class="table-row task-row completed" draggable="true">
                        <div class="cell status-cell">
                            <input type="checkbox" class="task-checkbox" checked>
                        </div>
                        <div class="cell task-cell">
                            <div class="task-title">🔍 이벤트 검색 기능</div>
                            <div class="task-description">실시간 필터링 + 결과 하이라이팅 구현</div>
                        </div>
                        <div class="cell priority-cell">
                            <span class="priority-chip medium">보통</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div> <!-- main-content-grid 닫기 -->
    </div>
</div>

<!-- Event Creation Modal -->
<div class="modal-overlay" id="event-modal" style="display: none;">
    <div class="modal-content event-modal">
        <div class="modal-header">
            <h2 class="modal-title">새 이벤트</h2>
            <button class="modal-close" onclick="closeEventModal()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        
        <div class="modal-body">
            <div class="form-group">
                <label>제목</label>
                <input type="text" id="event-title" placeholder="이벤트 제목 입력">
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label>시작일</label>
                    <input type="datetime-local" id="event-start">
                </div>
                <div class="form-group">
                    <label>종료일</label>
                    <input type="datetime-local" id="event-end">
                </div>
            </div>
            
            <div class="form-group">
                <label>설명</label>
                <textarea id="event-description" rows="4" placeholder="이벤트 설명 (선택사항)"></textarea>
            </div>
            
            <div class="form-group">
                <label>색상</label>
                <div class="color-picker">
                    <button class="color-option active" data-color="#3B82F6" style="background: #3B82F6"></button>
                    <button class="color-option" data-color="#10B981" style="background: #10B981"></button>
                    <button class="color-option" data-color="#F59E0B" style="background: #F59E0B"></button>
                    <button class="color-option" data-color="#EF4444" style="background: #EF4444"></button>
                    <button class="color-option" data-color="#8B5CF6" style="background: #8B5CF6"></button>
                    <button class="color-option" data-color="#EC4899" style="background: #EC4899"></button>
                </div>
            </div>
            
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="event-allday">
                    <span>종일 이벤트</span>
                </label>
            </div>
            
            <div class="form-actions">
                <button class="btn-cancel" onclick="closeEventModal()">취소</button>
                <button class="btn-save" onclick="saveEvent()">저장</button>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript -->
<script src="{{ url_for('static', filename='js/calendar-day.js') }}?v={{ range(100000, 999999) | random }}"></script>

</body>
</html>