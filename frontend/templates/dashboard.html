{% extends "base_dashboard.html" %}

{% block title %}NotionFlow Dashboard{% endblock %}

{% block content %}
<!-- ê°œìš” ì„¹ì…˜ (ê¸°ë³¸ í™œì„±) -->
<div id="overview-section" class="dashboard-section active">
            <div class="section-header">
                <h1>Dashboard Overview</h1>
                <p>NotionFlow í†µí•© ëŒ€ì‹œë³´ë“œì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤.</p>
            </div>
            
            <div class="dashboard-grid">
                <!-- í†µê³„ ì¹´ë“œë“¤ -->
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“Š</div>
                    <div class="stat-content">
                        <h3>ì „ì²´ í”Œë«í¼</h3>
                        <div class="stat-number">{{ summary.total_platforms or 5 }}</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">âœ…</div>
                    <div class="stat-content">
                        <h3>ì—°ê²°ëœ í”Œë«í¼</h3>
                        <div class="stat-number">{{ summary.configured_platforms or 0 }}</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">ğŸ”„</div>
                    <div class="stat-content">
                        <h3>ë™ê¸°í™” í™œì„±</h3>
                        <div class="stat-number">{{ summary.enabled_platforms or 0 }}</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“ˆ</div>
                    <div class="stat-content">
                        <h3>ì´ë²ˆ ë‹¬ í™œë™</h3>
                        <div class="stat-number">{{ events | length or 0 }}</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë™ê¸°í™” ì„¹ì…˜ -->
        <div id="sync-section" class="dashboard-section">
            <div class="section-header">
                <h2>ë™ê¸°í™” ìƒíƒœ</h2>
                <p>ê° í”Œë«í¼ë³„ ë™ê¸°í™” ìƒíƒœë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
            </div>
            
            <div class="sync-status-grid">
                <div class="sync-card">
                    <div class="platform-icon">ğŸ“</div>
                    <div class="platform-info">
                        <h3>Notion</h3>
                        <span class="status-badge disconnected">ë¯¸ì—°ê²°</span>
                    </div>
                </div>
                
                <div class="sync-card">
                    <div class="platform-icon">ğŸ“…</div>
                    <div class="platform-info">
                        <h3>Google Calendar</h3>
                        <span class="status-badge disconnected">ë¯¸ì—°ê²°</span>
                    </div>
                </div>
                
                <div class="sync-card">
                    <div class="platform-icon">ğŸ’¬</div>
                    <div class="platform-info">
                        <h3>Slack</h3>
                        <span class="status-badge disconnected">ë¯¸ì—°ê²°</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- API í‚¤ ì„¹ì…˜ -->
        <div id="api-keys-section" class="dashboard-section">
            <div class="api-keys-header">
                <h2>API í‚¤ ê´€ë¦¬</h2>
                <p>ì™¸ë¶€ ì„œë¹„ìŠ¤ì™€ì˜ ì—°ë™ì„ ìœ„í•œ API í‚¤ë¥¼ ê´€ë¦¬í•˜ì„¸ìš”.</p>
            </div>

            <div id="api-keys-container" class="api-keys-grid">
                <div class="api-key-card">
                    <h3>API í‚¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</h3>
                    <p>ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>
                </div>
            </div>
        </div>

        <!-- ì„¤ì • ì„¹ì…˜ -->
        <div id="settings-section" class="dashboard-section">
            <div class="settings-header">
                <h2>ì„¤ì •</h2>
                <p>ëŒ€ì‹œë³´ë“œ ì„¤ì •ì„ ê´€ë¦¬í•˜ì„¸ìš”.</p>
            </div>

            <div class="settings-content">
                <p>ì„¤ì • í˜ì´ì§€ ì¤€ë¹„ ì¤‘...</p>
            </div>
        </div>
{% endblock %}

{% block extra_js %}
<!-- Dashboard Core JavaScript -->
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>

<!-- Dashboard Navigation Script -->
<script>
    // Simple navigation function
    window.navigateToSection = function (section) {
        console.log('Navigating to section:', section);

        try {
            // Update URL
            const url = `/dashboard?section=${section}`;
            history.pushState(null, '', url);

            // Hide all sections
            const allSections = document.querySelectorAll('.dashboard-section');
            allSections.forEach(sectionEl => {
                sectionEl.classList.remove('active');
                sectionEl.style.display = 'none';
            });

            // Show target section
            const targetSection = document.getElementById(`${section}-section`);
            if (targetSection) {
                targetSection.classList.add('active');
                targetSection.style.display = 'block';
            }
        } catch (error) {
            console.error('Error in navigation:', error);
        }
    };
</script>
{% endblock %}