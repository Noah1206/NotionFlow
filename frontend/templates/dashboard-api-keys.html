{% extends "base_dashboard.html" %}

{% block title %}API Keys - NotionFlow{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/api-keys-redesign.css') }}?v={{ range(100000, 999999) | random }}">
{% endblock %}

{% block content %}
<!-- API í‚¤ ê´€ë¦¬ ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
<div class="api-container">
    
    <!-- í—¤ë” ì„¹ì…˜ -->
    <div class="api-header-container">
        <div class="api-header">
            <div class="api-title-section">
                <h1 class="api-main-title">ğŸ”‘ API í‚¤ ê´€ë¦¬</h1>
                <p class="api-subtitle">í”Œë«í¼ê³¼ ì•ˆì „í•˜ê²Œ ì—°ê²°í•˜ê³  ìº˜ë¦°ë”ë¥¼ ë™ê¸°í™”í•˜ì„¸ìš”</p>
            </div>
            
            <!-- ì›í´ë¦­ ì—°ë™í•˜ê¸° ë²„íŠ¼ -->
            <div class="one-click-integration">
                <button class="one-click-btn" onclick="connectAllPlatforms()" id="one-click-btn">
                    <span class="btn-icon">âš¡</span>
                    <span class="btn-text">ì›í´ë¦­ ì—°ë™í•˜ê¸°</span>
                    <div class="btn-loader" id="btn-loader" style="display: none;">
                        <div class="loader-spinner"></div>
                    </div>
                </button>
            </div>
        </div>
        
        <!-- ìƒíƒœ ìš”ì•½ ì¹´ë“œ -->
        <div class="api-status-cards">
            <div class="status-card active">
                <div class="status-icon">ğŸ”—</div>
                <div class="status-content">
                    <div class="status-number" id="connected-count">1</div>
                    <div class="status-label">ì—°ê²°ëœ í”Œë«í¼</div>
                </div>
            </div>
            <div class="status-card">
                <div class="status-icon">ğŸ“…</div>
                <div class="status-content">
                    <div class="status-number" id="sync-count">247</div>
                    <div class="status-label">ë™ê¸°í™”ëœ ì´ë²¤íŠ¸</div>
                </div>
            </div>
            <div class="status-card">
                <div class="status-icon">âœ…</div>
                <div class="status-content">
                    <div class="status-number success" id="success-rate">100%</div>
                    <div class="status-label">ì„±ê³µë¥ </div>
                </div>
            </div>
        </div>
    </div>

    <!-- í”Œë«í¼ ì—°ê²° ì„¹ì…˜ -->
    <div class="platforms-section">
        
        <!-- Notion ì—°ê²° ì¹´ë“œ -->
        <div class="platform-card" data-platform="notion">
            <div class="platform-header">
                <div class="platform-info">
                    <div class="platform-icon notion">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M4.459 4.208c.746.606 1.026.56 2.428.466l13.215-.793c.28 0 .047-.28-.046-.326L17.86 1.968c-.42-.326-.981-.7-2.055-.607L3.01 2.295c-.466.046-.56.28-.374.466zm.793 3.08v13.904c0 .747.373 1.027 1.214.98l14.523-.84c.841-.046 1.121-.56 1.121-1.167V6.354c0-.606-.233-.933-.747-.887l-15.177.887c-.56.047-.934.373-.934 1.027zm13.748.327c.093.42 0 .84-.42.888l-.7.14v10.264c-.608.327-1.168.514-1.635.514-.748 0-.935-.234-1.495-.933l-4.577-7.186v6.952L12.21 19s0 .84-1.168.84l-3.222.186c-.093-.186 0-.653.327-.746l.84-.233V9.854L7.822 9.76c-.094-.42.14-1.026.793-1.073l3.456-.233 4.764 7.279v-6.44l-1.215-.139c-.093-.514.28-.887.747-.933z"/>
                        </svg>
                    </div>
                    <div class="platform-details">
                        <h3 class="platform-name">Notion</h3>
                        <p class="platform-description">í˜ì´ì§€ì™€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìº˜ë¦°ë”ë¡œ ë™ê¸°í™”</p>
                        <div class="platform-status disconnected">
                            <span class="status-dot"></span>
                            ì—°ê²°ë˜ì§€ ì•ŠìŒ
                        </div>
                    </div>
                </div>
                <button class="platform-action-btn" onclick="togglePlatformDetails('notion')">
                    <span class="btn-text">ì—°ê²°í•˜ê¸°</span>
                    <svg class="expand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 9l6 6 6-6"/>
                    </svg>
                </button>
            </div>
            
            <!-- ì—°ê²° ìƒì„¸ í¼ -->
            <div class="platform-details-form" id="notion-details" style="display: none;">
                <div class="form-group">
                    <label for="notion-token">Internal Integration Token</label>
                    <input type="password" id="notion-token" name="notion-token" placeholder="secret_ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” í† í°ì„ ì…ë ¥í•˜ì„¸ìš”">
                    <small class="form-help">
                        <a href="https://www.notion.so/my-integrations" target="_blank" class="help-link">
                            ğŸ“– í† í° ë°œê¸‰ë°›ê¸°
                        </a>
                        | í˜ì´ì§€ ì ‘ê·¼ ê¶Œí•œ í•„ìš”
                    </small>
                </div>
                <div class="form-actions">
                    <button class="btn btn-secondary" onclick="togglePlatformDetails('notion')">ì·¨ì†Œ</button>
                    <button class="btn btn-primary" onclick="connectPlatform('notion')">
                        <span class="loading-spinner" style="display: none;"></span>
                        ì—°ê²°í•˜ê¸°
                    </button>
                </div>
            </div>
        </div>

        <!-- Google Calendar ì—°ê²° ì¹´ë“œ -->
        <div class="platform-card" data-platform="google">
            <div class="platform-header">
                <div class="platform-info">
                    <div class="platform-icon google">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                        </svg>
                    </div>
                    <div class="platform-details">
                        <h3 class="platform-name">Google Calendar</h3>
                        <p class="platform-description">êµ¬ê¸€ ìº˜ë¦°ë”ì™€ ì‹¤ì‹œê°„ ë™ê¸°í™”</p>
                        <div class="platform-status connected">
                            <span class="status-dot"></span>
                            ì—°ê²°ë¨
                        </div>
                    </div>
                </div>
                <button class="platform-action-btn connected" onclick="disconnectPlatform('google')">
                    <span class="btn-text">ì—°ê²° í•´ì œ</span>
                </button>
            </div>
        </div>

        <!-- Apple Calendar ì—°ê²° ì¹´ë“œ -->
        <div class="platform-card" data-platform="apple">
            <div class="platform-header">
                <div class="platform-info">
                    <div class="platform-icon apple">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19.5 4h-1.44a2.04 2.04 0 0 0-1.98 1.22l-1.58 4.49c-.25.7-.91 1.16-1.65 1.16-.73 0-1.39-.46-1.64-1.16l-1.58-4.49A2.04 2.04 0 0 0 7.62 4H6.5C5.67 4 5 4.67 5 5.5S5.67 7 6.5 7h1.12c.14 0 .27.09.32.22l1.58 4.49c.5 1.4 1.82 2.29 3.31 2.29s2.81-.89 3.31-2.29L17.72 7.22c.05-.13.18-.22.32-.22H19.5c.83 0 1.5-.67 1.5-1.5S20.33 4 19.5 4z"/>
                        </svg>
                    </div>
                    <div class="platform-details">
                        <h3 class="platform-name">Apple Calendar</h3>
                        <p class="platform-description">iCloud ìº˜ë¦°ë”ì™€ ë™ê¸°í™”</p>
                        <div class="platform-status disconnected">
                            <span class="status-dot"></span>
                            ì—°ê²°ë˜ì§€ ì•ŠìŒ
                        </div>
                    </div>
                </div>
                <button class="platform-action-btn" onclick="togglePlatformDetails('apple')">
                    <span class="btn-text">ì—°ê²°í•˜ê¸°</span>
                    <svg class="expand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 9l6 6 6-6"/>
                    </svg>
                </button>
            </div>
            
            <!-- ì—°ê²° ìƒì„¸ í¼ -->
            <div class="platform-details-form" id="apple-details" style="display: none;">
                <div class="form-group">
                    <label for="apple-username">Apple ID</label>
                    <input type="email" id="apple-username" name="apple-username" placeholder="your-apple-id@icloud.com">
                </div>
                <div class="form-group">
                    <label for="apple-password">ì•± ì „ìš© ì•”í˜¸</label>
                    <input type="password" id="apple-password" name="apple-password" placeholder="ì•± ì „ìš© ì•”í˜¸">
                    <small class="form-help">
                        <a href="https://support.apple.com/en-us/HT204397" target="_blank" class="help-link">
                            ğŸ“– ì•± ì „ìš© ì•”í˜¸ ë§Œë“¤ê¸°
                        </a>
                        | 2ë‹¨ê³„ ì¸ì¦ í•„ìš”
                    </small>
                </div>
                <div class="form-actions">
                    <button class="btn btn-secondary" onclick="togglePlatformDetails('apple')">ì·¨ì†Œ</button>
                    <button class="btn btn-primary" onclick="connectPlatform('apple')">
                        <span class="loading-spinner" style="display: none;"></span>
                        ì—°ê²°í•˜ê¸°
                    </button>
                </div>
            </div>
        </div>

        <!-- Outlook ì—°ê²° ì¹´ë“œ -->
        <div class="platform-card" data-platform="outlook">
            <div class="platform-header">
                <div class="platform-info">
                    <div class="platform-icon outlook">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.88 12.04q0 .45-.11.87-.1.41-.33.74-.22.33-.58.52-.37.2-.87.2-.51 0-.87-.2-.37-.19-.59-.52-.21-.33-.32-.74-.1-.42-.1-.87 0-.44.1-.86.11-.41.32-.73.22-.33.59-.52.36-.2.87-.2.5 0 .87.2.36.19.58.52.23.32.33.73.11.42.11.86zM21.5 4v16q0 .41-.3.7-.29.3-.7.3H3.5q-.41 0-.7-.3-.3-.29-.3-.7V4q0-.41.3-.7Q2.79 3 3.2 3h17.6q.41 0 .7.29.3.29.3.71zM8.5 13.5H7.25v.75H8.5v-.75zm0-3H7.25V11H8.5v-.5zM12 7.98H9v8h3V7.98zm6.5 2.53-2.25 2.02 2.25 2.05V10.51z"/>
                        </svg>
                    </div>
                    <div class="platform-details">
                        <h3 class="platform-name">Outlook</h3>
                        <p class="platform-description">Outlook ìº˜ë¦°ë”ì™€ ë™ê¸°í™”</p>
                        <div class="platform-status disconnected">
                            <span class="status-dot"></span>
                            ì—°ê²°ë˜ì§€ ì•ŠìŒ
                        </div>
                    </div>
                </div>
                <button class="platform-action-btn" onclick="togglePlatformDetails('outlook')">
                    <span class="btn-text">ì—°ê²°í•˜ê¸°</span>
                    <svg class="expand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 9l6 6 6-6"/>
                    </svg>
                </button>
            </div>
            
            <!-- ì—°ê²° ìƒì„¸ í¼ -->
            <div class="platform-details-form" id="outlook-details" style="display: none;">
                <div class="form-group">
                    <label for="outlook-email">Microsoft ê³„ì •</label>
                    <input type="email" id="outlook-email" name="outlook-email" placeholder="your-email@outlook.com">
                </div>
                <div class="form-group">
                    <label for="outlook-client-id">í´ë¼ì´ì–¸íŠ¸ ID</label>
                    <input type="text" id="outlook-client-id" name="outlook-client-id" placeholder="Azure ì•± ë“±ë¡ì—ì„œ ë°œê¸‰ë°›ì€ í´ë¼ì´ì–¸íŠ¸ ID">
                    <small class="form-help">
                        <a href="https://portal.azure.com/" target="_blank" class="help-link">
                            ğŸ“– Azure Portalì—ì„œ ì•± ë“±ë¡í•˜ê¸°
                        </a>
                        | Graph API ê¶Œí•œ í•„ìš”
                    </small>
                </div>
                <div class="form-actions">
                    <button class="btn btn-secondary" onclick="togglePlatformDetails('outlook')">ì·¨ì†Œ</button>
                    <button class="btn btn-primary" onclick="connectPlatform('outlook')">
                        <span class="loading-spinner" style="display: none;"></span>
                        ì—°ê²°í•˜ê¸°
                    </button>
                </div>
            </div>
        </div>

        <!-- Slack ì—°ê²° ì¹´ë“œ -->
        <div class="platform-card" data-platform="slack">
            <div class="platform-header">
                <div class="platform-info">
                    <div class="platform-icon slack">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.521-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.523 2.521h-2.521V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.521A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.523v-2.521h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"/>
                        </svg>
                    </div>
                    <div class="platform-details">
                        <h3 class="platform-name">Slack</h3>
                        <p class="platform-description">Slack ì•Œë¦¼ ë° ìº˜ë¦°ë” ì—°ë™</p>
                        <div class="platform-status disconnected">
                            <span class="status-dot"></span>
                            ì—°ê²°ë˜ì§€ ì•ŠìŒ
                        </div>
                    </div>
                </div>
                <button class="platform-action-btn" onclick="togglePlatformDetails('slack')">
                    <span class="btn-text">ì—°ê²°í•˜ê¸°</span>
                    <svg class="expand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 9l6 6 6-6"/>
                    </svg>
                </button>
            </div>
            
            <!-- ì—°ê²° ìƒì„¸ í¼ -->
            <div class="platform-details-form" id="slack-details" style="display: none;">
                <div class="form-group">
                    <label for="slack-webhook">Webhook URL</label>
                    <input type="url" id="slack-webhook" name="slack-webhook" placeholder="https://hooks.slack.com/services/...">
                    <small class="form-help">
                        <a href="https://api.slack.com/messaging/webhooks" target="_blank" class="help-link">
                            ğŸ“– Slack Webhook ë§Œë“¤ê¸°
                        </a>
                        | ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ê´€ë¦¬ì ê¶Œí•œ í•„ìš”
                    </small>
                </div>
                <div class="form-actions">
                    <button class="btn btn-secondary" onclick="togglePlatformDetails('slack')">ì·¨ì†Œ</button>
                    <button class="btn btn-primary" onclick="connectPlatform('slack')">
                        <span class="loading-spinner" style="display: none;"></span>
                        ì—°ê²°í•˜ê¸°
                    </button>
                </div>
            </div>
        </div>
        
    </div>

    <!-- ë³´ì•ˆ ë° ê°œì¸ì •ë³´ ë³´í˜¸ ì„¹ì…˜ -->
    <div class="security-section">
        <div class="security-header">
            <h2 class="security-title">ğŸ” ë³´ì•ˆ ë° ê°œì¸ì •ë³´</h2>
            <p class="security-subtitle">ëª¨ë“  ì—°ê²°ê³¼ ë°ì´í„°ëŠ” ìµœê³  ìˆ˜ì¤€ì˜ ë³´ì•ˆìœ¼ë¡œ ë³´í˜¸ë©ë‹ˆë‹¤</p>
        </div>
        
        <div class="security-features">
            <div class="security-feature">
                <div class="feature-icon">ğŸ”’</div>
                <div class="feature-content">
                    <h4>ì—”ë“œíˆ¬ì—”ë“œ ì•”í˜¸í™”</h4>
                    <p>ëª¨ë“  API í‚¤ì™€ ë°ì´í„°ëŠ” <span class="highlight">AES-256</span> ì•”í˜¸í™”ë¡œ ë³´í˜¸ë©ë‹ˆë‹¤</p>
                </div>
            </div>
            <div class="security-feature">
                <div class="feature-icon">ğŸš«</div>
                <div class="feature-content">
                    <h4>ë¬´ë¡œê·¸ ì •ì±…</h4>
                    <p>ê°œì¸ ìº˜ë¦°ë” ë°ì´í„°ëŠ” ì €ì¥í•˜ì§€ ì•Šìœ¼ë©° <span class="highlight">ì‹¤ì‹œê°„</span>ìœ¼ë¡œë§Œ ë™ê¸°í™”í•©ë‹ˆë‹¤</p>
                </div>
            </div>
            <div class="security-feature">
                <div class="feature-icon">ğŸ›¡ï¸</div>
                <div class="feature-content">
                    <h4>ìµœì†Œ ê¶Œí•œ ì›ì¹™</h4>
                    <p><span class="highlight">ì½ê¸° ì „ìš©</span> ì ‘ê·¼ìœ¼ë¡œ í•„ìš”í•œ ê¶Œí•œë§Œ ìš”ì²­í•©ë‹ˆë‹¤</p>
                </div>
            </div>
        </div>
    </div>

</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/api-keys.js') }}?v={{ range(100000, 999999) | random }}"></script>
<script>
// ì›í´ë¦­ ì—°ë™í•˜ê¸° ê¸°ëŠ¥
async function connectAllPlatforms() {
    const button = document.getElementById('one-click-btn');
    const loader = document.getElementById('btn-loader');
    const buttonText = button.querySelector('.btn-text');
    const buttonIcon = button.querySelector('.btn-icon');
    
    // ë²„íŠ¼ ìƒíƒœ ë³€ê²½
    button.disabled = true;
    buttonText.textContent = 'ì—°ë™ ì¤‘...';
    buttonIcon.style.display = 'none';
    loader.style.display = 'flex';
    
    // í”Œë«í¼ ìˆœì„œëŒ€ë¡œ ì—°ê²° ì‹œë„
    const platforms = ['notion', 'google', 'apple', 'outlook', 'slack'];
    let successCount = 0;
    
    try {
        for (const platform of platforms) {
            const card = document.querySelector(`[data-platform="${platform}"]`);
            const status = card.querySelector('.platform-status');
            
            // ì—°ê²° ì‹œë„ ì• ë‹ˆë©”ì´ì…˜
            card.style.transform = 'scale(1.02)';
            card.style.boxShadow = '0 8px 25px rgba(59, 130, 246, 0.15)';
            
            // ì‹¤ì œ ì—°ê²° ë¡œì§ (ì‹œë®¬ë ˆì´ì…˜)
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            // ì„±ê³µ ì‹œë®¬ë ˆì´ì…˜ (ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ)
            if (Math.random() > 0.3) { // 70% ì„±ê³µë¥ 
                status.className = 'platform-status connected';
                status.innerHTML = '<span class="status-dot"></span>ì—°ê²°ë¨';
                successCount++;
            }
            
            // ì• ë‹ˆë©”ì´ì…˜ ë³µì›
            card.style.transform = '';
            card.style.boxShadow = '';
        }
        
        // í†µê³„ ì—…ë°ì´íŠ¸
        document.getElementById('connected-count').textContent = successCount;
        
        // ì„±ê³µ ë©”ì‹œì§€
        if (successCount > 0) {
            showNotification(`${successCount}ê°œ í”Œë«í¼ ì—°ê²° ì™„ë£Œ!`, 'success');
        } else {
            showNotification('ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.', 'error');
        }
        
    } catch (error) {
        console.error('ì—°ë™ ì¤‘ ì˜¤ë¥˜:', error);
        showNotification('ì—°ë™ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
    }
    
    // ë²„íŠ¼ ìƒíƒœ ë³µì›
    setTimeout(() => {
        button.disabled = false;
        buttonText.textContent = 'ì›í´ë¦­ ì—°ë™í•˜ê¸°';
        buttonIcon.style.display = 'inline';
        loader.style.display = 'none';
    }, 1000);
}

// ì•Œë¦¼ í‘œì‹œ í•¨ìˆ˜
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.textContent = message;
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 16px 24px;
        border-radius: 12px;
        color: white;
        font-weight: 500;
        z-index: 10000;
        transform: translateX(400px);
        transition: transform 0.3s ease;
        ${type === 'success' ? 'background: linear-gradient(135deg, #10b981, #059669);' : ''}
        ${type === 'error' ? 'background: linear-gradient(135deg, #ef4444, #dc2626);' : ''}
        ${type === 'info' ? 'background: linear-gradient(135deg, #3b82f6, #2563eb);' : ''}
    `;
    
    document.body.appendChild(notification);
    
    // ì• ë‹ˆë©”ì´ì…˜
    setTimeout(() => notification.style.transform = 'translateX(0)', 100);
    setTimeout(() => notification.style.transform = 'translateX(400px)', 3000);
    setTimeout(() => document.body.removeChild(notification), 3500);
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ í†µê³„ ì—…ë°ì´íŠ¸
document.addEventListener('DOMContentLoaded', function() {
    updateConnectionStats();
});

function updateConnectionStats() {
    const connectedPlatforms = document.querySelectorAll('.platform-status.connected');
    document.getElementById('connected-count').textContent = connectedPlatforms.length;
    
    // ë™ê¸°í™”ëœ ì´ë²¤íŠ¸ ìˆ˜ ì‹œë®¬ë ˆì´ì…˜
    const eventCount = connectedPlatforms.length * Math.floor(Math.random() * 100) + 50;
    document.getElementById('sync-count').textContent = eventCount;
}
</script>
{% endblock %}